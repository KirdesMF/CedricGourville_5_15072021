function t(t){return t&&t.__esModule?t.default:t}var n={};function e(t,n,e,r,a,o,c){try{var i=t[o](c),u=i.value}catch(t){return void e(t)}i.done?n(u):Promise.resolve(u).then(r,a)}(n=function(t){return function(){var n=this,r=arguments;return new Promise((function(a,o){var c=t.apply(n,r);function i(t){e(c,a,o,i,u,"next",t)}function u(t){e(c,a,o,i,u,"throw",t)}i(void 0)}))}}).default=n,n.__esModule=!0;var r={};function a(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function o(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(Object(o),!0).forEach((function(e){t(r)(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))}))}return n}(r=function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}).default=r,r.__esModule=!0;var c=(t,n)=>{Array.isArray(n)?n.forEach((n=>c(t,n))):t.appendChild(n.nodeType?n:document.createTextNode(n))};function i(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),a=2;a<e;a++)r[a-2]=arguments[a];if("function"==typeof t)return t(o(o({},n),{},{children:r}));var i=document.createElement(t);if(n)for(var[u,s]of Object.entries(n)){var l=u.startsWith("on");if(l){var p=u.substr(2).toLowerCase();i.addEventListener(p,s)}else i.setAttribute(u,s.toString())}return r.forEach((t=>{c(i,t)})),i}var u=t=>t.substring(t.lastIndexOf("/"));function s(t){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(t/100)}var l={teddies:"colors",cameras:"lenses",furniture:"varnish"};function p(t){return parseInt(t,10)}var d,f={render:(d=t(n)((function*(){var t=window.location.pathname.slice(1),n=t,e=(yield function(t){return m.apply(this,arguments)}(t)).map((n=>'<a data-router="true" class="article__card" href="/'.concat(t,"/product?id=").concat(n._id,'" >\n                  <img width="320" height="240" src="').concat(n.imageUrl,'" />\n                  <div>\n                     <h2>').concat(n.name,"</h2>\n                     <small>").concat(s(n.price),"</small>\n                  </div>\n               </a>\n               "))).join("");return'\n         <section class="article panel h100 grid grid-center">\n            <div class="wrapper grid-flow" id="myContainer">\n               <h1>'.concat(n,'</h1>\n               <div class="article__grid">').concat(e,"</div>\n            </div>\n         </section>\n      ")})),function(){return d.apply(this,arguments)})};function m(){return(m=t(n)((function*(t){try{var n=yield fetch("http://localhost:3000/api/".concat(t));return n.ok?n.json():void console.log(n.status)}catch(t){console.log(t)}}))).apply(this,arguments)}var h=[{path:"/teddies",text:"Teddies",icon:"#teddy-icon"},{path:"/cameras",text:"Cameras",icon:"#camera-icon"},{path:"/furniture",text:"Furnitures",icon:"#furniture-icon"}].map((t=>'\n      <a href="'.concat(t.path,'" data-router="true">\n         ').concat(t.text,'\n         <span>\n            <svg\n               class="svg-icon"\n               focusable="false"\n               role="img"\n               aria-hidden="true"\n            >\n               <use href="').concat(t.icon,'" />\n            </svg>\n         </span>\n      </a>\n   '))).join("");function y(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function v(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(Object(a),!0).forEach((function(e){t(r)(n,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))}))}return n}var g={getAllItems:function(){var t={};for(var[n,e]of Object.entries(window.localStorage))t[n]=JSON.parse(e);return t||{}},getTotalItems:function(){this.getAllItems()},clearAll:()=>localStorage.clear(),getItem:function(t){return JSON.parse(localStorage.getItem(t))||[]},addItem:function(t){var{name:n,quantity:e,price:r,id:a,category:o,option:c}=t,i=this.getItem(n),u=i.find((t=>t.name===n));if(u){u.quantity=p(u.quantity)+p(e);var s=u.options.find((t=>t.name===c.name));s?s.quantity=p(s.quantity)+p(e):u.options.push(c)}else i.push({name:n,price:r,quantity:e,id:a,category:o,options:[v({},c)]});localStorage.setItem(n,JSON.stringify(i))},removeItem:function(t,n){var e=this.getItem(t),r=e.find((n=>n.name===t));r&&(r.quantity=p(r.quantity)-p(n),r.quantity<=0?(r.quantity=0,localStorage.removeItem(t)):localStorage.setItem(t,JSON.stringify(e)))}};function b(){return(b=t(n)((function*(t,n){try{var e=yield fetch("http://localhost:3000/api/".concat(t,"/").concat(n));return e.ok?e.json():void console.log(e.status)}catch(t){console.log(t)}}))).apply(this,arguments)}var O=[{path:"/",component:{render:()=>'\n         <section class="home panel h100">\n            <nav class="home__nav wrapper h100">\n               '.concat(h,"\n            </nav>\n         </section>\n      ")}},{path:"/teddies",component:f},{path:"/cameras",component:f},{path:"/furniture",component:f},{path:"/product",component:{render:function(){var e=t(n)((function*(){var t=window.location.href,n=new URL(t).searchParams.get("id"),e=window.location.pathname.replaceAll("/",""),r=function(t){return l[t]}(e),a=yield function(t,n){return b.apply(this,arguments)}(e,n),o=a[r].map((t=>'<option value="'.concat(t,'">').concat(t,"</option>"))),c=s(a.price);return'\n         <section class="product panel" >\n            <div class="wrapper">\n               <div class="product__inner" >\n                  <img \n                     src="'.concat(a.imageUrl,'"\n                     alt="').concat(a.name,'"\n                     data-name="').concat(a.name,'"\n                     data-id="').concat(n,'" \n                     data-category="').concat(e,'" \n                     data-price="').concat(a.price,'"\n                  />\n                  <div class="product__content" >\n                     <h1>').concat(a.name,"</h1>\n                     <p>").concat(a.description,"</p>\n                     <b>\n                        ").concat(c,'\n                     </b>\n                     <form action="">\n                        <input data-cart="quantity" type="number" max="99" min="1" value="1" />\n                        <select data-cart="options" >\n                           ').concat(o,'\n                        </select>\n                        <button type="submit" data-cart="btn" >Add to cart</button>\n                     </form>\n                  </div>\n               </div>\n            </div>\n         </section>\n      ')}));return function(){return e.apply(this,arguments)}}(),set:()=>{var t=document.querySelector('[data-cart="btn"]'),n=document.querySelector('[data-cart="quantity"]'),e=document.querySelector('[data-cart="options"]'),r=document.querySelector("[data-id]");t.addEventListener("click",(t=>{t.preventDefault();var a={id:r.getAttribute("data-id"),name:r.getAttribute("data-name"),price:r.getAttribute("data-price"),category:r.getAttribute("data-category"),quantity:n.value,option:{name:e.value,quantity:n.value}};g.addItem(a)}))}}},{path:"/shopping-cart",component:{render:()=>"\n         <section>\n            <h2>Panier</h2>\n         </section>\n      "}},{path:"/error",component:{render:()=>'\n         <section class="panel">\n           <div class="wrapper">\n            <a href="/" data-router="true">Error you should go back</a>\n           </div>\n         </section>\n      '}}];function w(){return j.apply(this,arguments)}function j(){return(j=t(n)((function*(){document.getElementById("app");var t=u(window.location.pathname),n=window.location.href,{component:e}=O.find((e=>n.includes("?id=")?"/product"===e.path:e.path===t||"/error"===e.path))}))).apply(this,arguments)}["popstate","load"].forEach((t=>window.addEventListener(t,w))),document.getElementById("app").appendChild(i((()=>i("button",{class:"wesh",onClick:()=>console.log("ok")},"OK")),null));
//# sourceMappingURL=index.d78a248d.js.map
