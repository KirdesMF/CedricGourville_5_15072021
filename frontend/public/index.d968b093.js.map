{"mappings":"MAAaA,EAAO,CACjBC,OAAMC,gBACGC,EAAOC,OAAOC,SAASC,SAASC,MAAM,uJAC9BJ,EAAKK,sFAoBEL,aAEfM,QAAYC,MAAK,6BAA8BP,YAChDM,EAAIE,GAKFF,EAAIG,YAJRC,QAAQC,IAAIL,EAAIM,cAKbC,GACNH,QAAQC,IAAIE,IA7BQC,CAAYd,IAE5Be,KACGC,GAAC,gCACiChB,SAAYgB,EAAEC,mBAAmBD,EAAEE,qBAExEC,KAAI,qECJRC,EANK,EACNpB,KAAI,WAAcqB,KAAI,YACtBrB,KAAI,WAAcqB,KAAI,YACtBrB,KAAI,aAAgBqB,KAAI,cAGPN,KAClBO,GAAI,YAAiBA,EAAKtB,4BAA4BsB,EAAKD,aAC7DF,KAAI,UCJAI,EAAM,EACPvB,KAAI,IAAOwB,UDKC,CACd1B,OAAM,8NAMSsB,+ECXbpB,KAAI,WAAcwB,UAAW3B,IAC7BG,KAAI,WAAcwB,UAAW3B,IAC7BG,KAAI,aAAgBwB,UAAW3B,IAC/BG,KAAI,WAAcwB,UCTH,CACjB1B,OAAMC,gBACG0B,EAAOxB,OAAOC,SAASuB,KACvBzB,EAAOC,OAAOC,SAASC,SAASC,MAAM,GAEtCsB,EADG,IAAOC,IAAIF,GACLG,aAAaC,IAAG,uKAcT7B,EAAM0B,aAEtBpB,QAAYC,MAAK,6BAA8BP,KAAQ0B,YACxDpB,EAAIE,GAKFF,EAAIG,YAJRC,QAAQC,IAAIL,EAAIM,cAKbC,GACNH,QAAQC,IAAIE,IAvBQiB,CAAa9B,EAAM0B,IAMZR,mFDiBlBa,UACNC,EAAMC,SAASC,eAAc,OAC7BlC,EAAOC,OAAOC,SAASC,SAASgC,yBAC9BX,GAAcD,EAAOa,MACzBC,GAAUA,EAAMrC,OAASA,GAAQqC,EAAMrC,KAAKsC,SAAQ,cAExDN,EAAIO,gBAAkBf,EAAU1B,0BAtB1B0C,EAAUP,SAASQ,iBAAgB,wBACnCC,EAAW,IAAOC,MAAK,UACvB3C,EAAOC,OAAOC,SAASC,SAE7BqC,EAAQI,SAASC,GACdA,EAAOC,iBAAgB,SAAWC,IAC/BA,EAAEC,iBACEhD,IAAS+C,EAAEE,OAAO9C,WAGtBF,OAAOiD,QAAQC,UAAS,MAASN,EAAOpB,KAAKU,eAC7ClC,OAAOmD,cAAcV,SAY3BW,gCAG4BT,SAASU,GACrCrD,OAAO6C,iBAAiBQ,EAAOvB,GAAa,KEnC/CE,SAASsB,KAAKC,mBAAkB,aCHT","sources":["src/js/views/Article.js","src/js/views/Home.js","src/js/router/router.js","src/js/views/Product.js","src/index.js","src/js/components/Header.js"],"sourcesContent":["export const Article = {\n   render: async () => {\n      const path = window.location.pathname.slice(1);\n      const title = path.toUpperCase();\n      const datas = await getDatasApi(path);\n      const images = datas\n         .map(\n            (d) =>\n               `<a data-router=\"true\" href=\"/${path}/?id=${d._id}\" ><img src=\"${d.imageUrl}\" /></a>`\n         )\n         .join('');\n\n      return /* html */ `\n         <section class=\"panel h100 grid grid-center\">\n            <div class=\"wrapper grid-flow\" id=\"myContainer\">\n               <h1>${title}</h1>\n               <div class=\"grid-images\" >${images}</div>\n            </div>\n         </section>\n      `;\n   },\n};\n\nasync function getDatasApi(path) {\n   try {\n      const res = await fetch(`http://localhost:3000/api/${path}`);\n      if (!res.ok) {\n         console.log(res.status);\n         return;\n      }\n\n      return res.json();\n   } catch (err) {\n      console.log(err);\n   }\n}\n","const LINKS = [\n   { path: '/teddies', text: 'Teddies' },\n   { path: '/cameras', text: 'Cameras' },\n   { path: '/furniture', text: 'Furniture' },\n];\n\nconst anchors = LINKS.map(\n   (link) => `<a href=\"${link.path}\" data-router=\"true\">${link.text}</a>`\n).join('');\n\nexport const Home = {\n   render: () => {\n      return /* html */ `\n         <section class=\"panel h100 grid grid-center\">\n            <div class=\"grid-flow wrapper\">\n               <h1>Séléction de nos meilleures ventes</h1>\n               <nav class=\"nav\">\n                  ${anchors}\n               </nav>\n            </div>\n         </section>\n      `;\n   },\n};\n","import { Article } from '../views/Article';\nimport { Home } from '../views/Home';\nimport { Product } from '../views/Product';\n\nconst routes = [\n   { path: '/', component: Home },\n   { path: '/teddies', component: Article },\n   { path: '/cameras', component: Article },\n   { path: '/furniture', component: Article },\n   { path: '/product', component: Product },\n];\n\nfunction setLinkRouter() {\n   const anchors = document.querySelectorAll(`[data-router=\"true\"]`);\n   const routerEvent = new Event('router');\n   const path = window.location.pathname;\n\n   anchors.forEach((anchor) =>\n      anchor.addEventListener('click', (e) => {\n         e.preventDefault();\n         if (path === e.target.pathname) {\n            return;\n         }\n         window.history.pushState({}, '', anchor.href.toLowerCase());\n         window.dispatchEvent(routerEvent);\n      })\n   );\n}\n\nasync function startRouter() {\n   const app = document.getElementById('app');\n   const path = window.location.pathname.toLowerCase();\n   const { component } = routes.find(\n      (route) => route.path === path || route.path.includes('/product')\n   );\n   app.innerHTML = await component.render();\n   setLinkRouter();\n}\n\n['load', 'router', 'popstate'].forEach((event) =>\n   window.addEventListener(event, startRouter, false)\n);\n","export const Product = {\n   render: async () => {\n      const href = window.location.href;\n      const path = window.location.pathname.slice(1);\n      const url = new URL(href);\n      const id = url.searchParams.get('id');\n      const datas = await getImagesApi(path, id);\n\n      return /*html */ `\n         <section class=\"panel\" >\n            <div class=\"wrapper\">\n               <h2>PRODUCT</h2>\n               <img src=\"${datas.imageUrl}\" />\n            </div>\n         </section>\n      `;\n   },\n};\n\nasync function getImagesApi(path, id) {\n   try {\n      const res = await fetch(`http://localhost:3000/api/${path}/${id}`);\n      if (!res.ok) {\n         console.log(res.status);\n         return;\n      }\n\n      return res.json();\n   } catch (err) {\n      console.log(err);\n   }\n}\n","import './styles.scss';\nimport './js/router/router';\n\nimport { Header } from './js/components/Header';\n\ndocument.body.insertAdjacentHTML('afterbegin', Header.render());\n","export const Header = {\n   render: () => {\n      return /* html */ `\n      <header class=\"header panel\">\n         <div class=\"wrapper grid grid-center\">\n            <a href=\"/\" data-router=\"true\">\n               <svg class=\"svg-icon\">\n                  <use href=\"#orinoco-icon\" />\n               </svg>\n            </a>\n         </div>\n      </header>\n      `;\n   },\n};\n"],"names":["$a48a103cecd8a31e548f764ccb64a19b$export$9218f53df63c9f97","render","async","path","window","location","pathname","slice","toUpperCase","res","fetch","ok","json","console","log","status","err","$a48a103cecd8a31e548f764ccb64a19b$var$getDatasApi","map","d","_id","imageUrl","join","$63380b52ecfb0e92f6d6a56c7cb8ab24$var$anchors","text","link","$dd699ca0ce3fe0e1b81c98c9c2b78c2a$var$routes","component","href","id","URL","searchParams","get","$0473e2f0c0051619ba23d49be076e174$var$getImagesApi","$dd699ca0ce3fe0e1b81c98c9c2b78c2a$var$startRouter","app","document","getElementById","toLowerCase","find","route","includes","innerHTML","anchors","querySelectorAll","routerEvent","Event","forEach","anchor","addEventListener","e","preventDefault","target","history","pushState","dispatchEvent","$dd699ca0ce3fe0e1b81c98c9c2b78c2a$var$setLinkRouter","event","body","insertAdjacentHTML"],"version":3,"file":"index.d968b093.js.map"}